<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시글 관리</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px 10px 0 0; }
        .header h1 { margin: 0; font-size: 2rem; }
        .nav { display: flex; gap: 10px; margin-top: 15px; }
        .nav-btn { background: rgba(255,255,255,0.2); color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; transition: all 0.3s; }
        .nav-btn:hover { background: rgba(255,255,255,0.3); }
        .nav-btn.active { background: white; color: #667eea; }
        
        .section { padding: 30px; border-bottom: 1px solid #eee; }
        .section:last-child { border-bottom: none; }
        .section h2 { margin-top: 0; color: #333; }
        
        .form-group { margin-bottom: 20px; }
        .form-row { display: flex; gap: 15px; margin-bottom: 20px; }
        .form-row .form-group { flex: 1; margin-bottom: 0; }
        
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #555; }
        input, select, textarea { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #e1e5e9; 
            border-radius: 8px; 
            box-sizing: border-box; 
            font-size: 14px;
            transition: border-color 0.3s;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        textarea { height: 120px; resize: vertical; }
        
        .btn { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            padding: 12px 24px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); }
        .btn.secondary { background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%); }
        .btn.danger { background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); }
        .btn:disabled { background: #bdc3c7; cursor: not-allowed; transform: none; }
        
        .result { 
            margin-top: 20px; 
            padding: 15px; 
            border-radius: 8px; 
            display: none;
        }
        .result.success { background-color: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
        .result.error { background-color: #f8d7da; color: #721c24; border: 2px solid #f5c6cb; }
        
        .board-list { margin-top: 20px; }
        .board-item { 
            border: 2px solid #e9ecef; 
            border-radius: 10px; 
            padding: 20px; 
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        .board-item:hover { border-color: #667eea; box-shadow: 0 2px 15px rgba(102, 126, 234, 0.1); }
        
        .board-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .board-title { font-size: 1.2rem; font-weight: 600; color: #2c3e50; margin: 0; }
        .board-id { font-size: 0.9rem; color: #6c757d; background: #e9ecef; padding: 4px 8px; border-radius: 4px; }
        
        .board-meta { display: flex; gap: 15px; font-size: 0.9rem; color: #6c757d; margin-bottom: 10px; }
        .board-content { color: #495057; line-height: 1.6; margin-bottom: 15px; }
        .board-content.preview { 
            max-height: 60px; 
            overflow: hidden; 
            position: relative; 
        }
        .board-content.preview::after {
            content: '...';
            position: absolute;
            bottom: 0;
            right: 0;
            background: white;
            padding-left: 10px;
        }
        
        .board-actions { display: flex; gap: 10px; justify-content: flex-end; }
        .board-actions .btn { padding: 8px 16px; font-size: 12px; }
        
        .search-section { background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 20px; }
        .search-form { display: flex; gap: 15px; align-items: end; flex-wrap: wrap; }
        .search-form .form-group { margin-bottom: 0; }
        .search-form .btn { white-space: nowrap; }
        
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { 
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); 
            color: white; 
            padding: 20px; 
            border-radius: 10px; 
            text-align: center;
        }
        .stat-value { font-size: 2rem; font-weight: bold; margin-bottom: 5px; }
        .stat-label { font-size: 0.9rem; opacity: 0.9; }
        
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 1000;
        }
        .modal-content { 
            background: white; 
            margin: 50px auto; 
            padding: 0; 
            width: 90%; 
            max-width: 600px; 
            border-radius: 10px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        .modal-header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            padding: 20px; 
            border-radius: 10px 10px 0 0; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
        }
        .modal-body { padding: 30px; }
        .close { color: white; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close:hover { opacity: 0.7; }
        
        @media (max-width: 768px) {
            .form-row { flex-direction: column; }
            .search-form { flex-direction: column; }
            .board-header { flex-direction: column; align-items: start; gap: 10px; }
            .board-actions { margin-top: 15px; }
        }
        
        .hidden { display: none !important; }
        .loading { opacity: 0.6; pointer-events: none; }
        
        .event-info { 
            background: #e8f4fd; 
            border: 1px solid #b8daff; 
            border-radius: 6px; 
            padding: 10px; 
            margin-top: 10px; 
        }
        .event-info h4 { margin: 0 0 8px 0; color: #004085; font-size: 0.9rem; }
        .event-info p { margin: 0; color: #004085; font-size: 0.85rem; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📝 게시글 관리</h1>
            <div class="nav">
                <button class="nav-btn active" onclick="showSection('list')">게시글 목록</button>
                <button class="nav-btn" onclick="showSection('create')">새 게시글</button>
                <button class="nav-btn" onclick="showSection('search')">검색 및 통계</button>
            </div>
        </div>

        <!-- 게시글 목록 섹션 -->
        <div id="listSection" class="section">
            <h2>📋 게시글 목록</h2>
            <div class="search-section">
                <div class="search-form">
                    <div class="form-group" style="min-width: 120px;">
                        <label for="listEventType">이벤트 타입</label>
                        <select id="listEventType">
                            <option value="">전체</option>
                            <option value="MUSICAL">뮤지컬</option>
                            <option value="MOVIE">영화</option>
                            <option value="THEATER">연극</option>
                            <option value="EXHIBITION">전시</option>
                            <option value="CLASSICAL">클래식</option>
                            <option value="DANCE">무용</option>
                            <option value="CONCERT">콘서트</option>
                            <option value="FESTIVAL">페스티벌</option>
                            <option value="LOCAL_EVENT">지역 행사</option>
                            <option value="OTHER">기타</option>
                        </select>
                    </div>
                    <div class="form-group" style="min-width: 150px;">
                        <label for="listAuthor">작성자</label>
                        <input type="text" id="listAuthor" placeholder="작성자 검색">
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button type="button" class="btn" onclick="loadBoardList()">🔍 조회</button>
                    </div>
                </div>
            </div>
            <div id="boardList" class="board-list">
                <!-- 게시글 목록이 여기에 동적으로 추가됩니다 -->
            </div>
            <div id="listResult" class="result"></div>
        </div>

        <!-- 새 게시글 작성 섹션 -->
        <div id="createSection" class="section hidden">
            <h2>✏️ 새 게시글 작성</h2>
            <form id="createForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="title">제목 *</label>
                        <input type="text" id="title" required>
                    </div>
                    <div class="form-group">
                        <label for="authorId">작성자 ID *</label>
                        <input type="number" id="authorId" required min="1">
                    </div>
                </div>

                <div class="form-group">
                    <label for="content">내용 *</label>
                    <textarea id="content" required placeholder="게시글 내용을 입력하세요..."></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="eventType">관련 이벤트 타입</label>
                        <select id="eventType">
                            <option value="">선택 안함</option>
                            <option value="MUSICAL">뮤지컬</option>
                            <option value="MOVIE">영화</option>
                            <option value="THEATER">연극</option>
                            <option value="EXHIBITION">전시</option>
                            <option value="CLASSICAL">클래식</option>
                            <option value="DANCE">무용</option>
                            <option value="CONCERT">콘서트</option>
                            <option value="FESTIVAL">페스티벌</option>
                            <option value="LOCAL_EVENT">지역 행사</option>
                            <option value="OTHER">기타</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="eventId">이벤트 ID</label>
                        <input type="number" id="eventId" min="1" placeholder="연결할 이벤트 ID (선택사항)">
                    </div>
                </div>

                <div style="text-align: right;">
                    <button type="submit" class="btn">📝 게시글 작성</button>
                </div>
            </form>
            <div id="createResult" class="result"></div>
        </div>

        <!-- 검색 및 통계 섹션 -->
        <div id="searchSection" class="section hidden">
            <h2>🔍 검색 및 통계</h2>
            
            <div class="stats" id="statsContainer">
                <!-- 통계가 여기에 동적으로 추가됩니다 -->
            </div>

            <div class="search-section">
                <h3>고급 검색</h3>
                <form id="searchForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="searchKeyword">키워드</label>
                            <input type="text" id="searchKeyword" placeholder="제목 또는 내용 검색">
                        </div>
                        <div class="form-group">
                            <label for="searchEventType">이벤트 타입</label>
                            <select id="searchEventType">
                                <option value="">전체</option>
                                <option value="MUSICAL">뮤지컬</option>
                                <option value="MOVIE">영화</option>
                                <option value="THEATER">연극</option>
                                <option value="EXHIBITION">전시</option>
                                <option value="CLASSICAL">클래식</option>
                                <option value="DANCE">무용</option>
                                <option value="CONCERT">콘서트</option>
                                <option value="FESTIVAL">페스티벌</option>
                                <option value="LOCAL_EVENT">지역 행사</option>
                                <option value="OTHER">기타</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="searchAuthor">작성자</label>
                            <input type="text" id="searchAuthor" placeholder="작성자명 검색">
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <button type="submit" class="btn">🔍 검색하기</button>
                    </div>
                </form>
            </div>

            <div id="searchResults" class="board-list">
                <!-- 검색 결과가 여기에 표시됩니다 -->
            </div>
            <div id="searchResult" class="result"></div>
        </div>
    </div>

    <!-- 편집 모달 -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>게시글 수정</h3>
                <span class="close" onclick="closeEditModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <input type="hidden" id="editBoardId">
                    
                    <div class="form-group">
                        <label for="editTitle">제목 *</label>
                        <input type="text" id="editTitle" required>
                    </div>

                    <div class="form-group">
                        <label for="editContent">내용 *</label>
                        <textarea id="editContent" required></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="editEventType">이벤트 타입</label>
                            <select id="editEventType">
                                <option value="">선택 안함</option>
                                <option value="MUSICAL">뮤지컬</option>
                                <option value="MOVIE">영화</option>
                                <option value="THEATER">연극</option>
                                <option value="EXHIBITION">전시</option>
                                <option value="CLASSICAL">클래식</option>
                                <option value="DANCE">무용</option>
                                <option value="CONCERT">콘서트</option>
                                <option value="FESTIVAL">페스티벌</option>
                                <option value="LOCAL_EVENT">지역 행사</option>
                                <option value="OTHER">기타</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editEventId">이벤트 ID</label>
                            <input type="number" id="editEventId" min="1">
                        </div>
                    </div>

                    <div style="text-align: right; margin-top: 30px;">
                        <button type="button" class="btn secondary" onclick="closeEditModal()">취소</button>
                        <button type="submit" class="btn">💾 저장</button>
                    </div>
                </form>
                <div id="editResult" class="result"></div>
            </div>
        </div>
    </div>

    <script>
        // 전역 변수
        let currentBoards = [];
        
        // 초기화
        document.addEventListener('DOMContentLoaded', () => {
            loadBoardList();
            loadStats();
            
            // 폼 이벤트 리스너
            document.getElementById('createForm').addEventListener('submit', handleCreateSubmit);
            document.getElementById('editForm').addEventListener('submit', handleEditSubmit);
            document.getElementById('searchForm').addEventListener('submit', handleSearchSubmit);
        });

        // 섹션 전환
        function showSection(sectionName) {
            const sections = ['listSection', 'createSection', 'searchSection'];
            const buttons = document.querySelectorAll('.nav-btn');
            
            sections.forEach(id => {
                document.getElementById(id).classList.toggle('hidden', id !== `${sectionName}Section`);
            });
            
            buttons.forEach((btn, index) => {
                const sectionNames = ['list', 'create', 'search'];
                btn.classList.toggle('active', sectionNames[index] === sectionName);
            });
            
            if (sectionName === 'search') {
                loadStats();
            }
        }

        // 게시글 목록 조회
        async function loadBoardList() {
            try {
                showLoading('boardList');
                const response = await fetch('/api/v1/board');
                const boards = await response.json();
                
                if (response.ok) {
                    currentBoards = boards;
                    renderBoardList(boards);
                    hideResult('listResult');
                } else {
                    showError('listResult', '게시글 목록 조회 실패');
                }
            } catch (error) {
                showError('listResult', `네트워크 오류: ${error.message}`);
            } finally {
                hideLoading('boardList');
            }
        }

        // 게시글 목록 렌더링
        function renderBoardList(boards) {
            const container = document.getElementById('boardList');
            
            if (!boards || boards.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: #6c757d;">📝 게시글이 없습니다.</div>';
                return;
            }
            
            container.innerHTML = boards.map(board => `
                <div class="board-item">
                    <div class="board-header">
                        <h3 class="board-title">${escapeHtml(board.title)}</h3>
                        <span class="board-id">ID: ${board.id}</span>
                    </div>
                    
                    <div class="board-meta">
                        <span>👤 ${escapeHtml(board.author.nickname)}</span>
                        <span>📅 ${formatDate(board.createdAt)}</span>
                        <span>❤️ ${board.likeCount}</span>
                        ${board.eventCard ? `<span>🎭 ${board.eventCard.eventType}</span>` : ''}
                    </div>
                    
                    <div class="board-content preview">${escapeHtml(board.content)}</div>
                    
                    ${board.eventCard ? `
                        <div class="event-info">
                            <h4>📍 연결된 이벤트</h4>
                            <p><strong>${escapeHtml(board.eventCard.title)}</strong></p>
                            <p>${escapeHtml(board.eventCard.eventLocation)} • ${formatDate(board.eventCard.startDate)}</p>
                        </div>
                    ` : ''}
                    
                    <div class="board-actions">
                        <button class="btn secondary" onclick="viewBoard(${board.id})">👁️ 상세보기</button>
                        <button class="btn" onclick="editBoard(${board.id})">✏️ 수정</button>
                        <button class="btn danger" onclick="deleteBoard(${board.id})">🗑️ 삭제</button>
                    </div>
                </div>
            `).join('');
        }

        // 새 게시글 작성
        async function handleCreateSubmit(e) {
            e.preventDefault();
            
            const formData = {
                title: document.getElementById('title').value,
                content: document.getElementById('content').value,
                authorId: parseInt(document.getElementById('authorId').value),
                eventType: document.getElementById('eventType').value || null,
                eventId: document.getElementById('eventId').value ? parseInt(document.getElementById('eventId').value) : null
            };
            
            try {
                showLoading('createForm');
                const response = await fetch('/api/v1/board', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showSuccess('createResult', '게시글이 성공적으로 작성되었습니다!');
                    document.getElementById('createForm').reset();
                    loadBoardList();
                } else {
                    showError('createResult', result.message || '게시글 작성에 실패했습니다.');
                }
            } catch (error) {
                showError('createResult', `네트워크 오류: ${error.message}`);
            } finally {
                hideLoading('createForm');
            }
        }

        // 게시글 상세보기
        function viewBoard(boardId) {
            const board = currentBoards.find(b => b.id === boardId);
            if (!board) return;
            
            alert(`제목: ${board.title}\n\n내용: ${board.content}\n\n작성자: ${board.author.nickname}\n작성일: ${formatDate(board.createdAt)}\n좋아요: ${board.likeCount}`);
        }

        // 게시글 수정 모달 열기
        function editBoard(boardId) {
            const board = currentBoards.find(b => b.id === boardId);
            if (!board) return;
            
            document.getElementById('editBoardId').value = board.id;
            document.getElementById('editTitle').value = board.title;
            document.getElementById('editContent').value = board.content;
            document.getElementById('editEventType').value = board.eventCard ? board.eventCard.eventType : '';
            document.getElementById('editEventId').value = board.eventCard ? board.eventCard.id : '';
            
            document.getElementById('editModal').style.display = 'block';
        }

        // 편집 모달 닫기
        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
            hideResult('editResult');
        }

        // 게시글 수정
        async function handleEditSubmit(e) {
            e.preventDefault();
            
            const boardId = document.getElementById('editBoardId').value;
            const formData = {
                title: document.getElementById('editTitle').value,
                content: document.getElementById('editContent').value,
                authorId: currentBoards.find(b => b.id == boardId).author.id, // 기존 작성자 ID 유지
                eventType: document.getElementById('editEventType').value || null,
                eventId: document.getElementById('editEventId').value ? parseInt(document.getElementById('editEventId').value) : null
            };
            
            try {
                showLoading('editForm');
                const response = await fetch(`/api/v1/board/${boardId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showSuccess('editResult', '게시글이 성공적으로 수정되었습니다!');
                    setTimeout(() => {
                        closeEditModal();
                        loadBoardList();
                    }, 1500);
                } else {
                    showError('editResult', result.message || '게시글 수정에 실패했습니다.');
                }
            } catch (error) {
                showError('editResult', `네트워크 오류: ${error.message}`);
            } finally {
                hideLoading('editForm');
            }
        }

        // 게시글 삭제
        async function deleteBoard(boardId) {
            if (!confirm('정말로 이 게시글을 삭제하시겠습니까?')) return;
            
            try {
                const response = await fetch(`/api/v1/board/${boardId}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    showSuccess('listResult', '게시글이 성공적으로 삭제되었습니다!');
                    loadBoardList();
                } else {
                    showError('listResult', '게시글 삭제에 실패했습니다.');
                }
            } catch (error) {
                showError('listResult', `네트워크 오류: ${error.message}`);
            }
        }

        // 검색 처리
        async function handleSearchSubmit(e) {
            e.preventDefault();
            
            const params = new URLSearchParams();
            const keyword = document.getElementById('searchKeyword').value;
            const eventType = document.getElementById('searchEventType').value;
            const author = document.getElementById('searchAuthor').value;
            
            if (keyword) params.append('keyword', keyword);
            if (eventType) params.append('eventType', eventType);
            if (author) params.append('author', author);
            
            try {
                showLoading('searchResults');
                const response = await fetch(`/api/v1/board/search?${params}`);
                const boards = await response.json();
                
                if (response.ok) {
                    renderSearchResults(boards);
                    hideResult('searchResult');
                } else {
                    showError('searchResult', '검색 실패');
                }
            } catch (error) {
                showError('searchResult', `네트워크 오류: ${error.message}`);
            } finally {
                hideLoading('searchResults');
            }
        }

        // 검색 결과 렌더링
        function renderSearchResults(boards) {
            const container = document.getElementById('searchResults');
            
            if (!boards || boards.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: #6c757d;">🔍 검색 결과가 없습니다.</div>';
                return;
            }
            
            container.innerHTML = `
                <h3>🔍 검색 결과 (${boards.length}개)</h3>
                ${boards.map(board => `
                    <div class="board-item">
                        <div class="board-header">
                            <h3 class="board-title">${escapeHtml(board.title)}</h3>
                            <span class="board-id">ID: ${board.id}</span>
                        </div>
                        <div class="board-meta">
                            <span>👤 ${escapeHtml(board.author.nickname)}</span>
                            <span>📅 ${formatDate(board.createdAt)}</span>
                            <span>❤️ ${board.likeCount}</span>
                        </div>
                        <div class="board-content preview">${escapeHtml(board.content)}</div>
                    </div>
                `).join('')}
            `;
        }

        // 통계 조회
        async function loadStats() {
            try {
                const response = await fetch('/api/v1/board');
                const boards = await response.json();
                
                if (response.ok) {
                    renderStats(boards);
                }
            } catch (error) {
                console.error('통계 로딩 실패:', error);
            }
        }

        // 통계 렌더링
        function renderStats(boards) {
            const container = document.getElementById('statsContainer');
            
            const totalBoards = boards.length;
            const totalLikes = boards.reduce((sum, board) => sum + board.likeCount, 0);
            const eventTypeCount = {};
            
            boards.forEach(board => {
                if (board.eventCard) {
                    const type = board.eventCard.eventType;
                    eventTypeCount[type] = (eventTypeCount[type] || 0) + 1;
                }
            });
            
            const mostPopularType = Object.entries(eventTypeCount)
                .sort(([,a], [,b]) => b - a)[0]?.[0] || '없음';
            
            container.innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${totalBoards}</div>
                    <div class="stat-label">총 게시글 수</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${totalLikes}</div>
                    <div class="stat-label">총 좋아요 수</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${mostPopularType}</div>
                    <div class="stat-label">인기 이벤트 타입</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${Object.keys(eventTypeCount).length}</div>
                    <div class="stat-label">연결된 이벤트 타입 수</div>
                </div>
            `;
        }

        // 유틸리티 함수들
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function showLoading(elementId) {
            document.getElementById(elementId).classList.add('loading');
        }

        function hideLoading(elementId) {
            document.getElementById(elementId).classList.remove('loading');
        }

        function showResult(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `result ${type}`;
            element.style.display = 'block';
        }

        function showSuccess(elementId, message) {
            showResult(elementId, message, 'success');
        }

        function showError(elementId, message) {
            showResult(elementId, message, 'error');
        }

        function hideResult(elementId) {
            document.getElementById(elementId).style.display = 'none';
        }

        // 모달 클릭 이벤트 (배경 클릭 시 닫기)
        window.onclick = function(event) {
            const modal = document.getElementById('editModal');
            if (event.target === modal) {
                closeEditModal();
            }
        }
    </script>
</body>
</html>