<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ë²¤íŠ¸ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .section { margin-bottom: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 3px; box-sizing: border-box; }
        button { background-color: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 3px; cursor: pointer; margin-right: 10px; }
        button:hover { background-color: #0056b3; }
        button.btn-danger { background-color: #dc3545; }
        button.btn-danger:hover { background-color: #c82333; }
        button.btn-secondary { background-color: #6c757d; }
        button.btn-secondary:hover { background-color: #545b62; }
        .result { margin-top: 20px; padding: 10px; background-color: #f8f9fa; border-radius: 3px; }
        .result.error { background-color: #f8d7da; color: #721c24; }
        .result.success { background-color: #d4edda; color: #155724; }
        .form-row { display: flex; gap: 15px; margin-bottom: 15px; }
        .form-row .form-group { flex: 1; margin-bottom: 0; }
        .test-scenarios { background-color: #fff3cd; padding: 15px; border-radius: 5px; margin: 20px 0; border: 1px solid #ffeaa7; }
        .scenario-btn { background-color: #ffc107; color: #212529; border: none; padding: 8px 15px; margin: 5px; border-radius: 3px; cursor: pointer; font-size: 12px; }
        .scenario-btn:hover { background-color: #e0a800; }
        .toggle-btn { background: none; border: none; color: #007bff; cursor: pointer; text-decoration: underline; }
        .collapsible { display: none; margin-top: 10px; }
        .collapsible.show { display: block; }
        .stats { display: flex; gap: 15px; margin-bottom: 20px; }
        .stat-box { flex: 1; background: #007bff; color: white; padding: 15px; border-radius: 5px; text-align: center; }
        .stat-value { font-size: 20px; font-weight: bold; }
        .stat-label { font-size: 12px; }
        .search-history { background-color: #f8f9fa; padding: 15px; border-radius: 5px; border: 1px solid #ddd; }
        .history-item { background: white; padding: 8px; margin: 5px 0; border-radius: 3px; cursor: pointer; border: 1px solid #ddd; font-size: 13px; }
        .history-item:hover { background-color: #f0f0f0; }
        pre { font-size: 12px; overflow-x: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” ì´ë²¤íŠ¸ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸</h1>
        <a href="/event-test.html">[ì´ë²¤íŠ¸ ê´€ë¦¬ ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°]</a>
        <a href="/event-create.html">[ì´ë²¤íŠ¸ ìƒì„± í˜ì´ì§€ë¡œ ì´ë™]</a>

        <!-- í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ -->
        <div class="test-scenarios">
            <h3>ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤</h3>
            <p>ìì£¼ ì‚¬ìš©í•˜ëŠ” ê²€ìƒ‰ íŒ¨í„´ì„ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”:</p>
            <button class="scenario-btn" onclick="loadScenario('all')">ì „ì²´ ì¡°íšŒ</button>
            <button class="scenario-btn" onclick="loadScenario('seoul')">ì„œìš¸ ì§€ì—­</button>
            <button class="scenario-btn" onclick="loadScenario('concert')">ì½˜ì„œíŠ¸ë§Œ</button>
            <button class="scenario-btn" onclick="loadScenario('recent')">ìµœê·¼ ì´ë²¤íŠ¸</button>
            <button class="scenario-btn" onclick="loadScenario('keyword')">í‚¤ì›Œë“œ ê²€ìƒ‰</button>
            <button class="scenario-btn" onclick="loadScenario('complex')">ë³µí•© ì¡°ê±´</button>
        </div>

        <!-- í†µê³„ ì •ë³´ -->
        <div class="stats">
            <div class="stat-box">
                <div class="stat-value" id="totalSearches">0</div>
                <div class="stat-label">ì´ ê²€ìƒ‰ íšŸìˆ˜</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="lastResultCount">-</div>
                <div class="stat-label">ë§ˆì§€ë§‰ ê²°ê³¼ ê°œìˆ˜</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="averageTime">-</div>
                <div class="stat-label">í‰ê·  ì‘ë‹µì‹œê°„(ms)</div>
            </div>
        </div>

        <!-- ê²€ìƒ‰ í¼ -->
        <div class="section">
            <h2>ğŸ” ì´ë²¤íŠ¸ ê²€ìƒ‰</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="eventType">ì´ë²¤íŠ¸ íƒ€ì…</label>
                    <select id="eventType">
                        <option value="">ì „ì²´</option>
                        <option value="MUSICAL">ë®¤ì§€ì»¬</option>
                        <option value="MOVIE">ì˜í™”</option>
                        <option value="THEATER">ì—°ê·¹</option>
                        <option value="EXHIBITION">ì „ì‹œ</option>
                        <option value="CLASSICAL">í´ë˜ì‹</option>
                        <option value="DANCE">ë¬´ìš©</option>
                        <option value="CONCERT">ì½˜ì„œíŠ¸</option>
                        <option value="FESTIVAL">í˜ìŠ¤í‹°ë²Œ</option>
                        <option value="LOCAL_EVENT">ì§€ì—­ í–‰ì‚¬</option>
                        <option value="OTHER">ê¸°íƒ€</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="keyword">í‚¤ì›Œë“œ</label>
                    <input type="text" id="keyword" placeholder="ì´ë²¤íŠ¸ ì œëª©, ì„¤ëª… ë“±ì„ ê²€ìƒ‰í•˜ì„¸ìš”">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="level1">ì‹œ/ë„</label>
                    <select id="level1"><option value="">ì„ íƒ</option></select>
                </div>
                <div class="form-group">
                    <label for="level2">ì‹œ/êµ°/êµ¬</label>
                    <select id="level2"><option value="">ì„ íƒ</option></select>
                </div>
                <div class="form-group">
                    <label for="level3">ì/ë©´/ë™</label>
                    <select id="level3"><option value="">ì„ íƒ</option></select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="startDate">ì‹œì‘ì¼</label>
                    <input type="date" id="startDate">
                </div>
                <div class="form-group">
                    <label for="endDate">ì¢…ë£Œì¼</label>
                    <input type="date" id="endDate">
                </div>
            </div>
            <button onclick="performSearch()">ê²€ìƒ‰</button>
            <button class="btn-secondary" onclick="clearForm()">ì´ˆê¸°í™”</button>
        </div>



        <!-- ê²€ìƒ‰ ê²°ê³¼ -->
        <div class="section">
            <h2>ğŸ“‹ ê²€ìƒ‰ ê²°ê³¼</h2>
            <div id="searchResult" class="result" style="display:none;"></div>
        </div>

        <!-- API ë””ë²„ê¹… ì •ë³´ -->
        <div class="section">
            <button class="toggle-btn" onclick="toggleDebugInfo()">ğŸ”§ API ë””ë²„ê¹… ì •ë³´ ë³´ê¸°/ìˆ¨ê¸°ê¸°</button>
            <div id="debugInfo" class="collapsible">
                <h3>ğŸ› ï¸ API ìš”ì²­/ì‘ë‹µ ì •ë³´</h3>
                <div>
                    <h4>ìš”ì²­ URL:</h4>
                    <div id="requestUrl" class="result"></div>
                </div>
                <div>
                    <h4>ìš”ì²­ íŒŒë¼ë¯¸í„°:</h4>
                    <div id="requestParams" class="result"></div>
                </div>
                <div>
                    <h4>ì‘ë‹µ ë°ì´í„°:</h4>
                    <div id="responseData" class="result"></div>
                </div>
            </div>
        </div>

        <!-- ê²€ìƒ‰ íˆìŠ¤í† ë¦¬ -->
        <div class="section">
            <button class="toggle-btn" onclick="toggleHistory()">ğŸ“œ ê²€ìƒ‰ íˆìŠ¤í† ë¦¬ ë³´ê¸°/ìˆ¨ê¸°ê¸°</button>
            <div id="searchHistory" class="collapsible search-history">
                <h3>ê²€ìƒ‰ ê¸°ë¡</h3>
                <div id="historyList"></div>
                <button class="btn-secondary" onclick="clearHistory()" style="margin-top: 10px;">ê¸°ë¡ ì‚­ì œ</button>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let searchStats = {
            totalSearches: 0,
            responseTimes: [],
            searchHistory: JSON.parse(localStorage.getItem('eventSearchHistory') || '[]')
        };

        // ì§€ì—­ ë°ì´í„° - event-create.htmlê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ í•˜ë“œì½”ë”©
        const regionData = {
            "ì„œìš¸íŠ¹ë³„ì‹œ": {
                "ê°•ë‚¨êµ¬": ["ê°œí¬ë™", "ë…¼í˜„ë™", "ëŒ€ì¹˜ë™", "ì‚¼ì„±ë™", "ì‹ ì‚¬ë™", "ì••êµ¬ì •ë™", "ì²­ë‹´ë™", "ì—­ì‚¼ë™"],
                "ê°•ë™êµ¬": ["ê°•ì¼ë™", "ê³ ë•ë™", "ê¸¸ë™", "ë‘”ì´Œë™", "ëª…ì¼ë™", "ìƒì¼ë™", "ì„±ë‚´ë™", "ì•”ì‚¬ë™", "ì²œí˜¸ë™"],
                "ê°•ë¶êµ¬": ["ë¯¸ì•„ë™", "ë²ˆë™", "ìˆ˜ìœ ë™", "ìš°ì´ë™"],
                "ê°•ì„œêµ¬": ["ê°€ì–‘ë™", "ê°œí™”ë™", "ê³µí•­ë™", "ê³¼í•´ë™", "ë‚´ë°œì‚°ë™", "ë“±ì´Œë™", "ë§ˆê³¡ë™", "ë°©í™”ë™", "ì™¸ë°œì‚°ë™", "ì—¼ì°½ë™"],
                "ê´€ì•…êµ¬": ["ë‚¨í˜„ë™", "ëŒ€í•™ë™", "ë„ë¦¼ë™", "ë¯¸ì„±ë™", "ë³´ë¼ë§¤ë™", "ë´‰ì²œë™", "ì‚¼ì„±ë™", "ì„œì›ë™", "ì‹ ë¦¼ë™", "ì¸í—Œë™", "ì¡°ì›ë™"],
                "ê´‘ì§„êµ¬": ["êµ¬ì˜ë™", "êµ°ìë™", "ëŠ¥ë™", "ìì–‘ë™", "ì¤‘ê³¡ë™", "í™”ì–‘ë™"],
                "êµ¬ë¡œêµ¬": ["ê°€ë¦¬ë´‰ë™", "ê°œë´‰ë™", "ê³ ì²™ë™", "êµ¬ë¡œë™", "ì‹ ë„ë¦¼ë™", "ì˜¤ë¥˜ë™", "ì˜¨ìˆ˜ë™", "ì²œì™•ë™", "í•­ë™"],
                "ê¸ˆì²œêµ¬": ["ê°€ì‚°ë™", "ë…ì‚°ë™", "ì‹œí¥ë™"],
                "ë…¸ì›êµ¬": ["ê³µë¦‰ë™", "ìƒê³„ë™", "ì›”ê³„ë™", "ì¤‘ê³„ë™", "í•˜ê³„ë™"],
                "ë„ë´‰êµ¬": ["ë„ë´‰ë™", "ë°©í•™ë™", "ìŒë¬¸ë™", "ì°½ë™"],
                "ë™ëŒ€ë¬¸êµ¬": ["ë‹µì‹­ë¦¬ë™", "ì‹ ì„¤ë™", "ìš©ë‘ë™", "ì´ë¬¸ë™", "ì¥ì•ˆë™", "ì „ë†ë™", "ì œê¸°ë™", "ì²­ëŸ‰ë¦¬ë™", "íšŒê¸°ë™"],
                "ë™ì‘êµ¬": ["ë…¸ëŸ‰ì§„ë™", "ëŒ€ë°©ë™", "ì‚¬ë‹¹ë™", "ìƒë„ë™", "ì‹ ëŒ€ë°©ë™", "í‘ì„ë™"],
                "ë§ˆí¬êµ¬": ["ê³µë•ë™", "êµ¬ìˆ˜ë™", "ë…¸ê³ ì‚°ë™", "ëŒ€í¥ë™", "ë„í™”ë™", "ë§ˆí¬ë™", "ë§ì›ë™", "ìƒì•”ë™", "ì„œê°•ë™", "ì„œêµë™", "ì„±ì‚°ë™", "ì‹ ê³µë•ë™", "ì‹ ìˆ˜ë™", "ì•„í˜„ë™", "ì—°ë‚¨ë™", "ì—¼ë¦¬ë™", "ìš©ê°•ë™", "í† ì •ë™", "í•˜ì¤‘ë™", "í•©ì •ë™"],
                "ì„œëŒ€ë¬¸êµ¬": ["ë‚¨ê°€ì¢Œë™", "ëƒ‰ì²œë™", "ëŒ€ì‹ ë™", "ëŒ€í˜„ë™", "ë¯¸ê·¼ë™", "ë¶ê°€ì¢Œë™", "ë¶ì•„í˜„ë™", "ì‹ ì´Œë™", "ì—°í¬ë™", "ì˜ì²œë™", "ì˜¥ì²œë™", "ì°½ì²œë™", "ì²œì—°ë™", "í˜„ì €ë™", "í™ì€ë™", "í™ì œë™"],
                "ì„œì´ˆêµ¬": ["ë‚´ê³¡ë™", "ë°˜í¬ë™", "ë°©ë°°ë™", "ì„œì´ˆë™", "ì‹ ì›ë™", "ì–‘ì¬ë™", "ì›ì§€ë™", "ì ì›ë™"],
                "ì„±ë™êµ¬": ["ê¸ˆí˜¸ë™", "ë§ˆì¥ë™", "ì‚¬ê·¼ë™", "ì„±ìˆ˜ë™", "ì†¡ì •ë™", "ìš©ë‹µë™", "ì™•ì‹­ë¦¬ë™", "í™ìµë™"],
                "ì„±ë¶êµ¬": ["ê¸¸ìŒë™", "ëˆì•”ë™", "ë™ì„ ë™", "ë³´ë¬¸ë™", "ì‚¼ì„ ë™", "ì„ê´€ë™", "ì„±ë¶ë™", "ì•ˆì•”ë™", "ì›”ê³¡ë™", "ì¥ìœ„ë™", "ì •ë¦‰ë™", "í•˜ì›”ê³¡ë™"],
                "ì†¡íŒŒêµ¬": ["ê°€ë½ë™", "ê±°ì—¬ë™", "ë§ˆì²œë™", "ë¬¸ì •ë™", "ë°©ì´ë™", "ì‚¼ì „ë™", "ì„ì´Œë™", "ì†¡íŒŒë™", "ì‹ ì²œë™", "ì˜¤ê¸ˆë™", "ì˜¤ë¥œë™", "ì ì‹¤ë™", "ì¥ì§€ë™", "í’ë‚©ë™"],
                "ì–‘ì²œêµ¬": ["ëª©ë™", "ì‹ ì •ë™", "ì‹ ì›”ë™"],
                "ì˜ë“±í¬êµ¬": ["ë‹¹ì‚°ë™", "ëŒ€ë¦¼ë™", "ë„ë¦¼ë™", "ë¬¸ë˜ë™", "ì‹ ê¸¸ë™", "ì–‘í‰ë™", "ì–‘í™”ë™", "ì—¬ì˜ë™", "ì˜ë“±í¬ë™"],
                "ìš©ì‚°êµ¬": ["ê°ˆì›”ë™", "ë‚¨ì˜ë™", "ë„ì›ë™", "ë™ë¹™ê³ ë™", "ë™ìë™", "ëšì„¬ë™", "ë³´ê´‘ë™", "ì„œë¹™ê³ ë™", "ì‹ ê³„ë™", "ì‹ ì°½ë™", "ì›íš¨ë¡œë™", "ì´ì´Œë™", "ì´íƒœì›ë™", "ì£¼ì„±ë™", "ì²­íŒŒë™", "í† ì„±ë™", "í•œê°•ë¡œë™", "í•œë‚¨ë™", "íš¨ì°½ë™", "í›„ì•”ë™"],
                "ì€í‰êµ¬": ["ê°ˆí˜„ë™", "êµ¬ì‚°ë™", "ë…¹ë²ˆë™", "ëŒ€ì¡°ë™", "ë¶ˆê´‘ë™", "ìˆ˜ìƒ‰ë™", "ì‹ ì‚¬ë™", "ì—­ì´Œë™", "ì‘ì•”ë™", "ì§„ê´€ë™"],
                "ì¢…ë¡œêµ¬": ["ê°€íšŒë™", "ê²¬ì§€ë™", "ê²½ìš´ë™", "ê³„ë™", "ê³µí‰ë™", "ê´€ìˆ˜ë™", "ê´€ì² ë™", "ê´€í›ˆë™", "êµë‚¨ë™", "êµë¶ë™", "êµ¬ê¸°ë™", "ê¶ì •ë™", "ê¶Œë†ë™", "ë‚™ì›ë™", "ë‚´ìˆ˜ë™", "ë‚´ìë™", "ëˆ„ìƒë™", "ëˆ„í•˜ë™", "ë„ë ´ë™", "ë™ìˆ­ë™", "ë¬˜ë™", "ë´‰ìµë™", "ë¶€ì•”ë™", "ì‚¬ê°„ë™", "ì‚¬ì§ë™", "ì‚¼ì²­ë™", "ì„œë¦°ë™", "ì†Œê²©ë™", "ì†¡ì›”ë™", "ìˆ˜ì†¡ë™", "ì‹ êµë™", "ì‹ ë¬¸ë¡œ1ê°€", "ì‹ ë¬¸ë¡œ2ê°€", "ì•ˆêµ­ë™", "ì—°ì§€ë™", "ì—°ê±´ë™", "ì˜ˆì§€ë™", "ì™€ë£¡ë™", "ìš´ë‹ˆë™", "ì›ë‚¨ë™", "ì›ì„œë™", "ì„ì§€ë¡œë™", "ìµì„ ë™", "ì¸ì‚¬ë™", "ì¬ë™", "ì ì„ ë™", "ì •ë…ë„ì„œê´€ê¸¸", "ì¢…ë¡œ1ê°€", "ì¢…ë¡œ2ê°€", "ì¢…ë¡œ3ê°€", "ì¢…ë¡œ4ê°€", "ì¢…ë¡œ5ê°€", "ì¢…ë¡œ6ê°€", "ì¤‘í•™ë™", "ì²­ì§„ë™", "ì²´ë¶€ë™", "ì°½ì‹ ë™", "ì¶©ì‹ ë™", "í†µì˜ë™", "í†µì¸ë™", "íŒ”íŒë™", "í‰ì°½ë™", "í•„ë™", "í–‰ì´Œë™", "í˜œí™”ë™", "í™ì§€ë™", "í™”ë™", "í›ˆì •ë™"],
                "ì¤‘êµ¬": ["ê´‘í¬ë™", "ë‹¤ì‚°ë™", "ë™í™”ë™", "ë¦½ì •ë™", "ëª…ë™", "ë´‰ë˜ë™", "ì‹ ë‹¹ë™", "ìŒë¦¼ë™", "ì„ì§€ë¡œë™", "ì¥êµë™", "ì •ë™", "ì¤‘ë¦¼ë™", "ì¶©ë¬´ë¡œ", "í•„ë™", "í™©í•™ë™", "í¥ì¸ë™"],
                "ì¤‘ë‘êµ¬": ["ë©´ëª©ë™", "ìƒë´‰ë™", "ì¤‘í™”ë™", "ë¬µë™", "ì‹ ë‚´ë™", "ë§ìš°ë™"]
            },
            "ë¶€ì‚°ê´‘ì—­ì‹œ": {
                "ì¤‘êµ¬": ["ê´‘ë³µë™", "ë‚¨í¬ë™", "ëŒ€ì²­ë™", "ë™ê´‘ë™", "ë³´ìˆ˜ë™", "ë¶€í‰ë™", "ì‹ ì°½ë™", "ì˜ì£¼ë™", "ì¤‘ì•™ë™", "ì°½ì„ ë™", "ì¶©ë¬´ë™"],
                "ì„œêµ¬": ["ê³ ì‹ ëŒ€í•™êµ", "ë‚¨ë¶€ë¯¼ë™", "ë™ëŒ€ì‹ ë™", "ë¶ë¶€ë¯¼ë™", "ì„œëŒ€ì‹ ë™", "ì•„ë¯¸ë™", "ì¶©ë¬´ë™"],
                "ë™êµ¬": ["ë²”ì¼ë™", "ìˆ˜ì •ë™", "ì¢Œì²œë™", "ì´ˆëŸ‰ë™", "í†µì¶œë™"]
            },
            "ëŒ€êµ¬ê´‘ì—­ì‹œ": {
                "ì¤‘êµ¬": ["ë‚¨ì¼ë™", "ë‹¬ì„±ë™", "ëŒ€ë´‰ë™", "ëŒ€ì‹ ë™", "ë™ì¸ë™", "ë´‰ì‚°ë™", "ì‚¼ë•ë™", "ì„±ë‚´ë™"],
                "ë™êµ¬": ["ê²€ì‚¬ë™", "ê³µì‚°ë™", "ë„í‰ë™", "ë™ì´Œë™", "ë°©ì´Œë™", "ë´‰ë¬´ë™", "ì‹ ì•”ë™", "ì‹ ì²œë™"],
                "ì„œêµ¬": ["ë‚´ë‹¹ë™", "ë¹„ì‚°ë™", "ìƒë¦¬ë™", "ì„œê´‘ë™", "ì›ëŒ€ë™", "ì´í˜„ë™", "ì¤‘ë¦¬ë™", "í‰ë¦¬ë™"]
            },
            "ì¸ì²œê´‘ì—­ì‹œ": {
                "ì¤‘êµ¬": ["ê´€ë™", "ë‚´ë™", "ë‹µë™", "ë„ì›ë™", "ë¶ì„±ë™", "ì„ ë¦°ë™", "ì†¡í•™ë™", "ì‹ ìƒë™", "ì‹ í¬ë™", "ìœ ë™", "ìœ¨ëª©ë™", "ì¸í˜„ë™", "ì „ë™", "ì¤‘ì‚°ë™", "í•´ì•ˆë™"],
                "ë™êµ¬": ["ê¸ˆê³¡ë™", "ì†¡ë¦¼ë™", "ì†¡í˜„ë™", "í™”ìˆ˜ë™", "í™”í‰ë™"],
                "ë‚¨êµ¬": ["ê´€êµë™", "êµ¬ì›”ë™", "ë„í™”ë™", "ë¬¸í•™ë™", "ìˆ­ì˜ë™", "ìš©í˜„ë™", "ì£¼ì•ˆë™", "í•™ìµë™"]
            },
            "ê´‘ì£¼ê´‘ì—­ì‹œ": {
                "ë™êµ¬": ["ê³„ë¦¼ë™", "ê¸ˆë‚¨ë¡œ1ê°€", "ê¸ˆë‚¨ë¡œ2ê°€", "ê¸ˆë‚¨ë¡œ3ê°€", "ê¸ˆë‚¨ë¡œ4ê°€", "ê¸ˆë‚¨ë¡œ5ê°€", "ë‚¨ë™", "ëŒ€ì¸ë™", "ë™ëª…ë™", "ë¶ˆë¡œë™", "ì„œë‚¨ë™", "ì†Œíƒœë™", "ìš©ì‚°ë™", "ì›”ë‚¨ë™", "ì¥ë™", "ì§€ì‚°ë™", "ì¶©ì¥ë™", "í˜¸ë‚¨ë™"],
                "ì„œêµ¬": ["ê´‘ì²œë™", "ê¸ˆí˜¸ë™", "ë†ì„±ë™", "ë•í¥ë™", "ë§ˆë¥µë™", "ë²½ì§„ë™", "ìƒë¬´ë™", "ì„¸í•˜ë™", "ìŒì´Œë™", "ìœ ì´Œë™", "ì¹˜í‰ë™", "í™”ì •ë™"],
                "ë‚¨êµ¬": ["êµ¬ë™", "ë…¸ëŒ€ë™", "ëŒ€ì´Œë™", "ë„ê¸ˆë™", "ë´‰ì„ ë™", "ì‚¬ë™", "ì„œë™", "ì–‘ë¦¼ë™", "ì–‘ì´Œë™", "ì›”ì‚°ë™", "ì´ì¥ë™", "ì§„ì›”ë™", "í–‰ì•”ë™"]
            },
            "ëŒ€ì „ê´‘ì—­ì‹œ": {
                "ì¤‘êµ¬": ["êµ¬ì™„ë™", "ê¸ˆê³ ë™", "ë‚­ì›”ë™", "ëŒ€ì‚¬ë™", "ëŒ€í¥ë™", "ëª©ë™", "ë¬¸ì°½ë™", "ë¬¸í™”ë™", "ì‚°ì„±ë™", "ì„êµë™", "ì„ í™”ë™", "ì•ˆì˜ë™", "ì–´ë‚¨ë™", "ì˜¤ë¥˜ë™", "ìš©ë‘ë™", "ìœ ì²œë™", "ì€í–‰ë™", "ì¸ë™", "ì •ë™", "ì¤‘ì´Œë™", "íƒœí‰ë™", "íŒì•”ë™", "í˜¸ë™"],
                "ë™êµ¬": ["ê°€ì–‘ë™", "ê°œë™", "ë‚­ì›”ë™", "ëŒ€ë™", "ëŒ€ë³„ë™", "ì‚¼ì„±ë™", "ìƒì†Œë™", "ì„¸ì²œë™", "ì†Œì œë™", "ì‹ ì¸ë™", "ìš©ìš´ë™", "ì´ì‚¬ë™", "ìì–‘ë™", "ì¥ë™", "ì •ë™", "ì¤‘ë™", "íŒì•”ë™", "í•˜ì†Œë™", "í™ë„ë™"],
                "ì„œêµ¬": ["ê°€ìˆ˜ì›ë™", "ê°€ì¥ë™", "ê°ˆë§ˆë™", "ê´€ì €ë™", "ê´´ì •ë™", "ê¸°ì„±ë™", "ë‚´ë™", "ë„ë§ˆë™", "ë„ì•ˆë™", "ë‘”ì‚°ë™", "ë§Œë…„ë™", "ë§¤ë…¸ë™", "ë³€ë™", "ë³µìˆ˜ë™", "ë´‰ê³¡ë™", "ì‚°ì§ë™", "ìš©ë¬¸ë™", "ìš°ëª…ë™", "ì›ì •ë™", "ì›”í‰ë™", "ì¥ì•ˆë™", "ì •ë¦¼ë™", "í‰ì´Œë™"],
                "ìœ ì„±êµ¬": ["ê´€í‰ë™", "êµ¬ì„±ë™", "ê¶ë™", "ë…¸ì€ë™", "ë´‰ëª…ë™", "ìƒëŒ€ë™", "ì„±ë¶ë™", "ì‹ ì„±ë™", "ì–´ì€ë™", "ì˜¨ì²œë™", "ì›ë‚´ë™", "ììš´ë™", "ì¥ëŒ€ë™", "ì „ë¯¼ë™", "ì§€ì¡±ë™", "ì¶”ëª©ë™", "íƒ‘ë¦½ë™", "í•˜ê¸°ë™", "í•™í•˜ë™"]
            },
            "ìš¸ì‚°ê´‘ì—­ì‹œ": {
                "ì¤‘êµ¬": ["êµë™", "ë‚¨ì™¸ë™", "ë‹¤ìš´ë™", "ë‹¬ë™", "ë°˜êµ¬ë™", "ë³µì‚°ë™", "ì„±ë‚¨ë™", "ì•½ì‚¬ë™", "ì¥í˜„ë™", "ì „í•˜ë™", "íƒœí™”ë™", "í•™ì„±ë™"],
                "ë™êµ¬": ["ëŒ€ì†¡ë™", "ë™ë¶€ë™", "ë¯¸í¬ë™", "ë°©ì–´ë™", "ì„œë¶€ë™", "ì „í•˜ë™", "ì£¼ì „ë™", "í™”ì •ë™"],
                "ë‚¨êµ¬": ["ê³ ì‚¬ë™", "ë‚¨í™”ë™", "ë‹¬ë™", "ë‘ì™•ë™", "ë§¤ì•”ë™", "ë¬´ê±°ë™", "ë¶€ê³¡ë™", "ì‚¼ì‚°ë™", "ì„ ì•”ë™", "ìˆ˜ì•”ë™", "ì‹ ì •ë™", "ì•¼ìŒë™", "ì—¬ì²œë™", "ì˜¥ë™", "ìš©ì—°ë™", "ì¥ìƒí¬ë™", "ì „í•˜ë™"]
            },
            "ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ": {
                "ì„¸ì¢…ì‹œ": ["ê³ ìš´ë™", "ë‚˜ì„±ë™", "ëˆ„ë¦¬ë™", "ë„ë‹´ë™", "ë³´ëŒë™", "ìƒˆë¡¬ë™", "ì†Œë‹´ë™", "ì•„ë¦„ë™", "ì–´ì§„ë™", "í•œì†”ë™", "í•´ë°€ë™"]
            },
            "ê²½ê¸°ë„": {
                "ìˆ˜ì›ì‹œ": ["ê¶Œì„ êµ¬", "ì˜í†µêµ¬", "ì¥ì•ˆêµ¬", "íŒ”ë‹¬êµ¬"],
                "ì„±ë‚¨ì‹œ": ["ë¶„ë‹¹êµ¬", "ìˆ˜ì •êµ¬", "ì¤‘ì›êµ¬"],
                "ê³ ì–‘ì‹œ": ["ë•ì–‘êµ¬", "ì¼ì‚°ë™êµ¬", "ì¼ì‚°ì„œêµ¬"],
                "ìš©ì¸ì‹œ": ["ê¸°í¥êµ¬", "ìˆ˜ì§€êµ¬", "ì²˜ì¸êµ¬"],
                "ë¶€ì²œì‹œ": ["ì¤‘ë™", "ìƒë™", "ì‹¬ê³¡ë™", "ì›ë¯¸ë™", "ì†Œì‚¬ë™", "ì˜¤ì •ë™", "ì¶˜ì˜ë™", "ì—­ê³¡ë™", "ê´´ì•ˆë™", "ì‚¼ì •ë™", "ì—¬ì›”ë™", "ë„ë‹¹ë™", "ì•½ëŒ€ë™", "ë²”ë°•ë™", "ì‘ë™"],
                "ì•ˆì‚°ì‹œ": ["ë‹¨ì›êµ¬", "ìƒë¡êµ¬"],
                "ì•ˆì–‘ì‹œ": ["ë™ì•ˆêµ¬", "ë§Œì•ˆêµ¬"],
                "ë‚¨ì–‘ì£¼ì‹œ": ["ì™€ë¶€ì", "ì¡°ì•ˆë©´", "ë³„ë‚´ë©´", "ë³„ë‚´ë™", "ë‹¤ì‚°ë™", "í™”ë„ì", "ìˆ˜ë™ë©´", "ì§„ì ‘ì", "ì§„ê±´ì", "ì˜¤ë‚¨ì"],
                "í™”ì„±ì‹œ": ["ë™íƒ„ë™", "ë³‘ì ë™", "íƒœì•ˆë™", "í–¥ë‚¨ì", "íŒ”íƒ„ë©´", "ë§¤ì†¡ë©´", "ìš°ì •ì", "ë´‰ë‹´ì", "ë‚¨ì–‘ì", "ì„œì‹ ë©´", "ì¥ì•ˆë©´", "ì–‘ê°ë©´", "ì •ë‚¨ë©´", "ì†¡ì‚°ë©´", "ë§ˆë„ë©´", "ë¹„ë´‰ë©´", "ìƒˆì†”ë™"],
                "í‰íƒì‹œ": ["ì†¡íƒ„ë™", "í‰íƒë™", "ì•ˆì¤‘ì", "í¬ìŠ¹ì", "ì²­ë¶ì", "ì˜¤ì„±ë©´", "íŒ½ì„±ì", "ì„œíƒ„ë©´", "ê³ ë•ë©´", "í˜„ë•ë©´", "ì§„ìœ„ë©´"],
                "ì˜ì •ë¶€ì‹œ": ["ì˜ì •ë¶€ë™", "í˜¸ì›ë™", "ì¥ì•”ë™", "ì‹ ê³¡ë™", "ìê¸ˆë™", "ê°€ëŠ¥ë™", "ë…¹ì–‘ë™", "ë¯¼ë½ë™"],
                "ì‹œí¥ì‹œ": ["ëŒ€ì•¼ë™", "ì •ì™•ë™", "ì‹ ì²œë™", "ì—°ì„±ë™", "ì€í–‰ë™", "ì¥í˜„ë™", "ë§¤í™”ë™", "ëª©ê°ë™"],
                "íŒŒì£¼ì‹œ": ["ê¸ˆì´Œë™", "ìš´ì •ë™", "êµí•˜ë™", "ë¬¸ì‚°ì", "íƒ„í˜„ë©´", "ë²•ì›ì", "ì¡°ë¦¬ì", "íŒŒì£¼ì", "ì›”ë¡±ë©´", "ì¥ë‹¨ë©´", "ì§„ë™ë©´", "ì§„ì„œë©´", "ì ì„±ë©´", "íŒŒí‰ë©´", "ê´‘íƒ„ë©´"],
                "ê¹€í¬ì‹œ": ["ê¹€í¬ë™", "ì‚¬ìš°ë™", "í’ë¬´ë™", "ì¥ê¸°ë™", "êµ¬ë˜ë™", "ë§ˆì‚°ë™", "ìš´ì–‘ë™", "ê³ ì´Œì", "ì›”ê³¶ë©´", "í•˜ì„±ë©´", "ëŒ€ê³¶ë©´", "í†µì§„ì"]
            },
            "ê°•ì›ë„": {
                "ì¶˜ì²œì‹œ": ["ì†Œì–‘ë™", "ì¡°ì–‘ë™", "í‡´ê³„ë™", "íš¨ìë™", "ì•½ì‚¬ëª…ë™", "ê·¼í™”ë™", "êµë™", "ì¡°ìš´ë™", "ì¹ ì „ë™", "ì˜¨ì˜ë™", "í›„í‰ë™", "ì„ì‚¬ë™"],
                "ì›ì£¼ì‹œ": ["ì¤‘ì•™ë™", "ì›ë™", "ë°˜ê³¡ë™", "í•™ì„±ë™", "ë‹¨ê³„ë™", "ëª…ë¥œë™", "íƒœì¥ë™", "ìš°ì‚°ë™", "ê°œìš´ë™", "ê´€ì„¤ë™", "í¥ì—…ë©´", "ë¬¸ë§‰ì", "ì†Œì´ˆë©´", "í˜¸ì €ë©´", "ì§€ì •ë©´", "ë¶€ë¡ ë©´", "ì‹ ë¦¼ë©´", "íŒë¶€ë©´", "ì¸ì œë©´"],
                "ê°•ë¦‰ì‹œ": ["í™ì œë™", "ì¤‘ì•™ë™", "ì„±ë•ë™", "êµë™", "ì˜¥ì²œë™", "í¬ë‚¨ë™", "ì´ˆë‹¹ë™", "ê²¬ì†Œë™", "ì†¡ì •ë™", "ê°•ë¬¸ë™", "ë‚´ê³¡ë™", "ì‚¬ì²œë©´", "ì—°ê³¡ë©´", "ì™•ì‚°ë©´", "êµ¬ì •ë©´", "ê°•ë™ë©´", "ì˜¥ê³„ë©´", "ì£¼ë¬¸ì§„ì"]
            },
            "ì¶©ì²­ë¶ë„": {
                "ì²­ì£¼ì‹œ": ["ìƒë‹¹êµ¬", "ì„œì›êµ¬", "í¥ë•êµ¬", "ì²­ì›êµ¬"],
                "ì¶©ì£¼ì‹œ": ["ì¶©ì£¼ë™", "ì•ˆë¦¼ë™", "ì—°ìˆ˜ë™", "ê¸ˆê°€ë©´", "ë…¸ì€ë©´", "ë‹¤ì¸ë©´", "ëŒ€ì†Œì›ë©´", "ë™ëŸ‰ë©´", "ì‚°ì²™ë©´", "ì†Œíƒœë©´", "ìˆ˜ì•ˆë³´ë©´", "ì‹ ë‹ˆë©´", "ì‚´ë¯¸ë©´", "ì•™ì„±ë©´", "ì—„ì •ë©´", "ì¢…ë¯¼ë™", "ì¤‘ì•™íƒ‘ë©´", "ê°€ê¸ˆë©´"],
                "ì œì²œì‹œ": ["ì²­ì „ë™", "ì˜ì„œë™", "ì˜ë¦¼ë™", "ê³ ì•”ë™", "ì‹ ì›”ë™", "í™”ì‚°ë™", "ì†¡í•™ë©´", "ë°±ìš´ë©´", "ë´‰ì–‘ì", "ê¸ˆì„±ë©´", "ì²­í’ë©´", "ìˆ˜ì‚°ë©´", "ë•ì‚°ë©´", "í•œìˆ˜ë©´", "ì˜ì¶˜ë©´"]
            },
            "ì¶©ì²­ë‚¨ë„": {
                "ì²œì•ˆì‹œ": ["ë™ë‚¨êµ¬", "ì„œë¶êµ¬"],
                "ê³µì£¼ì‹œ": ["ì¤‘í•™ë™", "ì›…ì§„ë™", "ê¸ˆì„±ë™", "ì‹ ê´€ë™", "ì˜¥ë£¡ë™", "ì •ì•ˆë©´", "ìš°ì„±ë©´", "ì´ì¸ë©´", "íƒ„ì²œë©´", "ê³„ë£¡ë©´", "ì˜ë‹¹ë©´", "ìœ êµ¬ì", "ë°˜í¬ë©´", "ì¥ê¸°ë©´", "ì‚¬ê³¡ë©´", "ì›”ì†¡ë™"],
                "ë³´ë ¹ì‹œ": ["ëŒ€ì²œë™", "ê¶ì´Œë™", "ëª…ì²œë™", "ì£¼í¬ë©´", "ì˜¤ì²œë©´", "ì²œë¶ë©´", "ì²­ë¼ë©´", "ì²­ì†Œë©´", "ì›…ì²œì", "ë¯¸ì‚°ë©´", "ì„±ì£¼ë©´", "ì£¼êµë©´", "ë‚¨í¬ë©´"]
            },
            "ì „ë¼ë¶ë„": {
                "ì „ì£¼ì‹œ": ["ì™„ì‚°êµ¬", "ë•ì§„êµ¬"],
                "êµ°ì‚°ì‹œ": ["ì†Œë£¡ë™", "ì‹ í’ë™", "ê°œì •ë™", "ìˆ˜ì†¡ë™", "ì¡°ì´Œë™", "ê²½ì•”ë™", "êµ¬ì•”ë™", "ëŒ€ì•¼ë©´", "ê°œì •ë©´", "ì„±ì‚°ë©´", "ë‚˜í¬ë©´", "ì˜¥ë„ë©´", "ì˜¥êµ¬ì", "ì„í”¼ë©´", "ì„œìˆ˜ë©´"],
                "ìµì‚°ì‹œ": ["ì¸ë¶ë™", "ëª¨í˜„ë™", "ë¶€ì†¡ë™", "ì˜ë“±ë™", "ì–´ì–‘ë™", "ë§ˆë™", "ì†¡í•™ë™", "íŒ”ë´‰ë™", "í•¨ë¼ë©´", "ì„±ë‹¹ë©´", "ë‚­ì‚°ë©´", "ì—¬ì‚°ë©´", "ê¸ˆë§ˆë©´", "ì™•ê¶ë©´", "ìš©ì•ˆë©´", "ë§ì„±ë©´", "ì¶˜í¬ë©´", "ì˜¤ì‚°ë©´", "í•¨ì—´ì", "ì›…í¬ë©´"]
            },
            "ì „ë¼ë‚¨ë„": {
                "ëª©í¬ì‹œ": ["ì¤‘ì•™ë™", "ì„œì‚°ë™", "ì£½êµë™", "ì˜¨ê¸ˆë™", "ì—°ë™", "ìƒë™", "í•˜ë‹¹ë™", "ì‚°ì •ë™", "ìš©í•´ë™", "ìœ¨ë„ë™", "ì´ë¡œë™"],
                "ì—¬ìˆ˜ì‹œ": ["ì¤‘ì•™ë™", "ì„œê°•ë™", "ë™ì²œë™", "ê´‘ë¦¼ë™", "ìˆ˜ì •ë™", "ì—¬ì²œë™", "ìŒë´‰ë™", "ë¬¸ìˆ˜ë™", "ë¯¸í‰ë™", "ë§Œë•ë™", "ì†Œë¼ë©´", "ë‚¨ë©´", "í™”ì •ë©´", "ì‚¼ì‚°ë©´", "í™”ì–‘ë©´"],
                "ìˆœì²œì‹œ": ["ì¡°ë¡€ë™", "í–¥ë™", "ì—°í–¥ë™", "ì¡°ê³¡ë™", "ë•ì—°ë™", "ì¸ì œë™", "ì™•ì¡°ë™", "ë„ì‚¬ë™", "í•´ë£¡ë©´", "í™©ì „ë©´", "ìƒì‚¬ë©´", "ë³„ëŸ‰ë©´", "ë‚™ì•ˆë©´", "ì™¸ì„œë©´", "ì†¡ê´‘ë©´", "ì£¼ì•”ë©´", "ìŠ¹ì£¼ì"]
            },
            "ê²½ìƒë¶ë„": {
                "í¬í•­ì‹œ": ["ë‚¨êµ¬", "ë¶êµ¬"],
                "ê²½ì£¼ì‹œ": ["ê²½ì£¼ë™", "ì„±ë™ë™", "í™©ë‚¨ë™", "ìš©ê°•ë™", "ë³´ë¬¸ë™", "í˜„ê³¡ë©´", "ì™¸ë™ì", "ê±´ì²œì", "ê°í¬ì", "ì–‘ë¶ë©´", "ì–‘ë‚¨ë©´", "ë‚´ë‚¨ë©´", "ì„œë©´", "ì•ˆê°•ì", "ì‚°ë‚´ë©´", "ì²œë¶ë©´", "ìš¸ì£¼êµ°"],
                "ì•ˆë™ì‹œ": ["ì•ˆë™ë™", "í‰í™”ë™", "ì¤‘êµ¬ë™", "ì„œë¶€ë™", "ì†¡ì²œë™", "ë‚¨ì„ ë©´", "ë‚¨í›„ë©´", "ë„ì‚°ë©´", "ì„œí›„ë©´", "ë…¹ì „ë©´", "ê¸¸ì•ˆë©´", "ì„í•˜ë©´", "ì„ë™ë©´", "ì¼ì§ë©´", "ë¶í›„ë©´", "ì™€ë£¡ë©´", "ì˜ˆì•ˆë©´", "í’ì²œë©´", "í’ì‚°ì"]
            },
            "ê²½ìƒë‚¨ë„": {
                "ì°½ì›ì‹œ": ["ì˜ì°½êµ¬", "ì„±ì‚°êµ¬", "ë§ˆì‚°í•©í¬êµ¬", "ë§ˆì‚°íšŒì›êµ¬", "ì§„í•´êµ¬"],
                "ì§„ì£¼ì‹œ": ["ìƒí‰ë™", "ìƒëŒ€ë™", "í•˜ëŒ€ë™", "ì¤‘ì•™ë™", "ì„±ë¶ë™", "ì´ë°˜ì„±ë©´", "ëŒ€ê³¡ë©´", "ê¸ˆê³¡ë©´", "ì§‘í˜„ë©´", "ë¯¸ì²œë©´", "ì§€ìˆ˜ë©´", "ì •ì´Œë©´", "ì‚¬ë´‰ë©´", "ë¬¸ì‚°ì", "ë‚´ë™ë©´", "ëª…ì„ë©´", "ê¸ˆì‚°ë©´"],
                "í†µì˜ì‹œ": ["ì¤‘ì•™ë™", "ë¶ì‹ ë™", "ë¬´ì „ë™", "ë´‰í‰ë™", "ê´‘ë„ë©´", "ì‚°ì–‘ì", "ìš©ë‚¨ë©´", "ë„ì‚°ë©´", "ìš•ì§€ë©´", "í•œì‚°ë©´", "ì‚¬ëŸ‰ë©´"]
            },
            "ì œì£¼íŠ¹ë³„ìì¹˜ë„": {
                "ì œì£¼ì‹œ": ["ì¼ë„ë™", "ì´ë„ë™", "ì‚¼ë„ë™", "ìš©ë‹´ë™", "ê±´ì…ë™", "í™”ë¶ë™", "ì‚¼ì–‘ë™", "ë´‰ê°œë™", "ì•„ë¼ë™", "ì˜¤ë¼ë™", "ì—°ë™", "ë…¸í˜•ë™", "ì™¸ë„ë™", "ì´í˜¸ë™", "ë„ë‘ë™", "ì• ì›”ì", "ì¡°ì²œì", "êµ¬ì¢Œì", "ìš°ë„ë©´", "í•œë¦¼ì", "í•œê²½ë©´", "ì¶”ìë©´"],
                "ì„œê·€í¬ì‹œ": ["ì„œê·€ë™", "ì¤‘ì•™ë™", "ì²œì§€ë™", "íš¨ëˆë™", "ì˜ì²œë™", "ë™í™ë™", "ì„œí˜¸ë™", "í† í‰ë™", "ì‹ íš¨ë™", "ì¤‘ë¬¸ë™", "ì˜ˆë˜ë™", "í•˜ì›ë™", "ê°•ì •ë™", "ë²•í™˜ë™", "í˜¸ê·¼ë™", "ìœ„ë¯¸ë™", "ì‹ ì°½ë™", "í•˜ëª¨ë™", "ëŒ€í¬ë™", "ìƒ‰ë‹¬ë™", "ë‚¨ì›ì", "ì„±ì‚°ì", "ì•ˆë•ë©´", "í‘œì„ ë©´", "ëŒ€ì •ì"]
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            // ì§€ì—­ ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”
            setupRegionGroup(["level1", "level2", "level3"]);
            
            updateStats();
            loadHistoryDisplay();
        });

        // ì§€ì—­ ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™” - event-create.htmlê³¼ ë™ì¼í•œ ë°©ì‹
        function setupRegionGroup(ids) {
            const [level1, level2, level3] = ids.map(id => document.getElementById(id));
            const initialText = 'ì„ íƒ';
            
            // Level 1 ì´ˆê¸°í™”
            clearAndSetDefault(level1, initialText);
            Object.keys(regionData).forEach(region => {
                const option = document.createElement('option');
                option.value = region;
                option.textContent = region;
                level1.appendChild(option);
            });
            
            level1.addEventListener('change', function() {
                const selectedRegion = this.value;
                clearAndSetDefault(level2, initialText);
                clearAndSetDefault(level3, initialText);
                
                if (selectedRegion && regionData[selectedRegion]) {
                    Object.keys(regionData[selectedRegion]).forEach(subRegion => {
                        const option = document.createElement('option');
                        option.value = subRegion;
                        option.textContent = subRegion;
                        level2.appendChild(option);
                    });
                }
            });
            
            level2.addEventListener('change', function() {
                const selectedRegion = level1.value;
                const selectedSubRegion = this.value;
                clearAndSetDefault(level3, initialText);
                
                if (selectedRegion && selectedSubRegion && regionData[selectedRegion] && regionData[selectedRegion][selectedSubRegion]) {
                    regionData[selectedRegion][selectedSubRegion].forEach(district => {
                        const option = document.createElement('option');
                        option.value = district;
                        option.textContent = district;
                        level3.appendChild(option);
                    });
                }
            });
        }
        
        function clearAndSetDefault(select, defaultText) {
            select.innerHTML = '';
            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.textContent = defaultText;
            select.appendChild(defaultOption);
        }


        // ê²€ìƒ‰ ì‹¤í–‰
        async function performSearch() {
            const startTime = Date.now();
            
            // ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ìˆ˜ì§‘
            const params = collectSearchParams();
            const queryString = new URLSearchParams(params).toString();
            const requestUrl = `/api/v1/events/search${queryString ? '?' + queryString : ''}`;

            // ë””ë²„ê¹… ì •ë³´ í‘œì‹œ
            updateDebugInfo(requestUrl, params, null);

            try {
                const response = await fetch(requestUrl);
                const data = await response.json();
                const endTime = Date.now();
                const responseTime = endTime - startTime;

                // í†µê³„ ì—…ë°ì´íŠ¸
                searchStats.totalSearches++;
                searchStats.responseTimes.push(responseTime);
                
                // ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ
                displaySearchResults(data, response.ok, responseTime);
                
                // ë””ë²„ê¹… ì •ë³´ ì—…ë°ì´íŠ¸
                updateDebugInfo(requestUrl, params, data);
                
                // ê²€ìƒ‰ íˆìŠ¤í† ë¦¬ì— ì¶”ê°€
                addToHistory(params, data.length || 0, responseTime);
                
                updateStats();

            } catch (error) {
                displaySearchResults({ error: error.message }, false, Date.now() - startTime);
                updateDebugInfo(requestUrl, params, { error: error.message });
            }
        }

        // ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ìˆ˜ì§‘
        function collectSearchParams() {
            const params = {};
            
            const keyword = document.getElementById('keyword').value.trim();
            if (keyword) params.keyword = keyword;
            
            const level1 = document.getElementById('level1').value;
            const level2 = document.getElementById('level2').value;
            const level3 = document.getElementById('level3').value;
            
            if (level1) params['regionDto.level1'] = level1;
            if (level2) params['regionDto.level2'] = level2;
            if (level3) params['regionDto.level3'] = level3;
            
            const eventType = document.getElementById('eventType').value;
            if (eventType) params.eventType = eventType;
            
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            if (startDate) params.startDate = startDate;
            if (endDate) params.endDate = endDate;
            
            return params;
        }

        // ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ
        function displaySearchResults(data, isSuccess, responseTime) {
            const resultDiv = document.getElementById('searchResult');
            resultDiv.style.display = 'block';
            
            if (isSuccess) {
                const count = Array.isArray(data) ? data.length : 0;
                resultDiv.className = 'result';
                resultDiv.innerHTML = `<h4>âœ… ê²€ìƒ‰ ì„±ê³µ (${responseTime}ms) - ${count}ê°œ ê²°ê³¼</h4><pre>${JSON.stringify(data, null, 2)}</pre>`;
                document.getElementById('lastResultCount').textContent = count;
            } else {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `<h4>âŒ ê²€ìƒ‰ ì‹¤íŒ¨ (${responseTime}ms)</h4><pre>${JSON.stringify(data, null, 2)}</pre>`;
                document.getElementById('lastResultCount').textContent = 'Error';
            }
        }

        // ë””ë²„ê¹… ì •ë³´ ì—…ë°ì´íŠ¸
        function updateDebugInfo(url, params, response) {
            document.getElementById('requestUrl').innerHTML = `<pre>${url}</pre>`;
            document.getElementById('requestParams').innerHTML = `<pre>${JSON.stringify(params, null, 2)}</pre>`;
            if (response !== null) {
                document.getElementById('responseData').innerHTML = `<pre>${JSON.stringify(response, null, 2)}</pre>`;
            }
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('totalSearches').textContent = searchStats.totalSearches;
            
            if (searchStats.responseTimes.length > 0) {
                const avgTime = Math.round(
                    searchStats.responseTimes.reduce((a, b) => a + b, 0) / searchStats.responseTimes.length
                );
                document.getElementById('averageTime').textContent = avgTime;
            }
        }

        // ê²€ìƒ‰ íˆìŠ¤í† ë¦¬ ê´€ë¦¬
        function addToHistory(params, resultCount, responseTime) {
            const historyItem = {
                timestamp: new Date().toLocaleString(),
                params: params,
                resultCount: resultCount,
                responseTime: responseTime
            };
            
            searchStats.searchHistory.unshift(historyItem);
            if (searchStats.searchHistory.length > 10) {
                searchStats.searchHistory.pop(); // ìµœê·¼ 10ê°œë§Œ ìœ ì§€
            }
            
            localStorage.setItem('eventSearchHistory', JSON.stringify(searchStats.searchHistory));
            loadHistoryDisplay();
        }

        function loadHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            searchStats.searchHistory.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'history-item';
                div.innerHTML = `
                    <strong>${item.timestamp}</strong> 
                    (${item.resultCount}ê±´, ${item.responseTime}ms)<br>
                    <small>${JSON.stringify(item.params)}</small>
                `;
                div.onclick = () => restoreFromHistory(item.params);
                historyList.appendChild(div);
            });
        }

        function restoreFromHistory(params) {
            // í¼ì— íˆìŠ¤í† ë¦¬ ë°ì´í„° ë³µì›
            document.getElementById('keyword').value = params.keyword || '';
            document.getElementById('eventType').value = params.eventType || '';
            document.getElementById('startDate').value = params.startDate || '';
            document.getElementById('endDate').value = params.endDate || '';
            
            // ì§€ì—­ ì •ë³´ ë³µì›
            if (params['regionDto.level1']) {
                document.getElementById('level1').value = params['regionDto.level1'];
                document.getElementById('level1').dispatchEvent(new Event('change'));
                
                setTimeout(() => {
                    if (params['regionDto.level2']) {
                        document.getElementById('level2').value = params['regionDto.level2'];
                        document.getElementById('level2').dispatchEvent(new Event('change'));
                        
                        setTimeout(() => {
                            if (params['regionDto.level3']) {
                                document.getElementById('level3').value = params['regionDto.level3'];
                            }
                        }, 100);
                    }
                }, 100);
            }
        }

        // í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ë¡œë“œ
        function loadScenario(type) {
            clearForm();
            
            switch (type) {
                case 'all':
                    // ì „ì²´ ì¡°íšŒ - íŒŒë¼ë¯¸í„° ì—†ìŒ
                    break;
                case 'seoul':
                    document.getElementById('level1').value = 'ì„œìš¸íŠ¹ë³„ì‹œ';
                    document.getElementById('level1').dispatchEvent(new Event('change'));
                    break;
                case 'concert':
                    document.getElementById('eventType').value = 'CONCERT';
                    break;
                case 'recent':
                    const today = new Date();
                    const nextWeek = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);
                    document.getElementById('startDate').value = today.toISOString().split('T')[0];
                    document.getElementById('endDate').value = nextWeek.toISOString().split('T')[0];
                    break;
                case 'keyword':
                    document.getElementById('keyword').value = 'ìŒì•…';
                    break;
                case 'complex':
                    document.getElementById('keyword').value = 'í˜ìŠ¤í‹°ë²Œ';
                    document.getElementById('level1').value = 'ê²½ê¸°ë„';
                    document.getElementById('eventType').value = 'FESTIVAL';
                    const startDate = new Date();
                    document.getElementById('startDate').value = startDate.toISOString().split('T')[0];
                    document.getElementById('level1').dispatchEvent(new Event('change'));
                    break;
            }
        }
        


        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function clearForm() {
            document.getElementById('keyword').value = '';
            document.getElementById('level1').value = '';
            document.getElementById('level2').innerHTML = '<option value="">ì„ íƒ</option>';
            document.getElementById('level3').innerHTML = '<option value="">ì„ íƒ</option>';
            document.getElementById('eventType').value = '';
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
            
        }


        function clearHistory() {
            if (confirm('ê²€ìƒ‰ íˆìŠ¤í† ë¦¬ë¥¼ ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                searchStats.searchHistory = [];
                localStorage.removeItem('eventSearchHistory');
                loadHistoryDisplay();
            }
        }

        function toggleDebugInfo() {
            const debugInfo = document.getElementById('debugInfo');
            debugInfo.classList.toggle('show');
        }

        function toggleHistory() {
            const history = document.getElementById('searchHistory');
            history.classList.toggle('show');
        }
    </script>
</body>
</html>