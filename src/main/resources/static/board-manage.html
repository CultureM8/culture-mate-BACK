<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²Œì‹œê¸€ ê´€ë¦¬</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px 10px 0 0; }
        .header h1 { margin: 0; font-size: 2rem; }
        .nav { display: flex; gap: 10px; margin-top: 15px; }
        .nav-btn { background: rgba(255,255,255,0.2); color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; transition: all 0.3s; }
        .nav-btn:hover { background: rgba(255,255,255,0.3); }
        .nav-btn.active { background: white; color: #667eea; }
        
        .section { padding: 30px; border-bottom: 1px solid #eee; }
        .section:last-child { border-bottom: none; }
        .section h2 { margin-top: 0; color: #333; }
        
        .form-group { margin-bottom: 20px; }
        .form-row { display: flex; gap: 15px; margin-bottom: 20px; }
        .form-row .form-group { flex: 1; margin-bottom: 0; }
        
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #555; }
        input, select, textarea { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #e1e5e9; 
            border-radius: 8px; 
            box-sizing: border-box; 
            font-size: 14px;
            transition: border-color 0.3s;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        textarea { height: 120px; resize: vertical; }
        
        .btn { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            padding: 12px 24px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); }
        .btn.secondary { background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%); }
        .btn.danger { background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); }
        .btn:disabled { background: #bdc3c7; cursor: not-allowed; transform: none; }
        
        .result { 
            margin-top: 20px; 
            padding: 15px; 
            border-radius: 8px; 
            display: none;
        }
        .result.success { background-color: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
        .result.error { background-color: #f8d7da; color: #721c24; border: 2px solid #f5c6cb; }
        
        .board-list { margin-top: 20px; }
        .board-item { 
            border: 2px solid #e9ecef; 
            border-radius: 10px; 
            padding: 20px; 
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        .board-item:hover { border-color: #667eea; box-shadow: 0 2px 15px rgba(102, 126, 234, 0.1); }
        
        .board-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .board-title { font-size: 1.2rem; font-weight: 600; color: #2c3e50; margin: 0; }
        .board-id { font-size: 0.9rem; color: #6c757d; background: #e9ecef; padding: 4px 8px; border-radius: 4px; }
        
        .board-meta { display: flex; gap: 15px; font-size: 0.9rem; color: #6c757d; margin-bottom: 10px; }
        .board-content { color: #495057; line-height: 1.6; margin-bottom: 15px; }
        .board-content.preview { 
            max-height: 60px; 
            overflow: hidden; 
            position: relative; 
        }
        .board-content.preview::after {
            content: '...';
            position: absolute;
            bottom: 0;
            right: 0;
            background: white;
            padding-left: 10px;
        }
        
        .board-actions { display: flex; gap: 10px; justify-content: flex-end; }
        .board-actions .btn { padding: 8px 16px; font-size: 12px; }
        
        .search-section { background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 20px; }
        .search-form { display: flex; gap: 15px; align-items: end; flex-wrap: wrap; }
        .search-form .form-group { margin-bottom: 0; }
        .search-form .btn { white-space: nowrap; }
        
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { 
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); 
            color: white; 
            padding: 20px; 
            border-radius: 10px; 
            text-align: center;
        }
        .stat-value { font-size: 2rem; font-weight: bold; margin-bottom: 5px; }
        .stat-label { font-size: 0.9rem; opacity: 0.9; }
        
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 1000;
        }
        .modal-content { 
            background: white; 
            margin: 50px auto; 
            padding: 0; 
            width: 90%; 
            max-width: 600px; 
            border-radius: 10px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        .modal-header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            padding: 20px; 
            border-radius: 10px 10px 0 0; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
        }
        .modal-body { padding: 30px; }
        .close { color: white; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close:hover { opacity: 0.7; }
        
        @media (max-width: 768px) {
            .form-row { flex-direction: column; }
            .search-form { flex-direction: column; }
            .board-header { flex-direction: column; align-items: start; gap: 10px; }
            .board-actions { margin-top: 15px; }
        }
        
        .hidden { display: none !important; }
        .loading { opacity: 0.6; pointer-events: none; }
        
        .event-info { 
            background: #e8f4fd; 
            border: 1px solid #b8daff; 
            border-radius: 6px; 
            padding: 10px; 
            margin-top: 10px; 
        }
        .event-info h4 { margin: 0 0 8px 0; color: #004085; font-size: 0.9rem; }
        .event-info p { margin: 0; color: #004085; font-size: 0.85rem; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ ê²Œì‹œê¸€ ê´€ë¦¬</h1>
            <div class="nav">
                <button class="nav-btn active" onclick="showSection('list')">ê²Œì‹œê¸€ ëª©ë¡</button>
                <button class="nav-btn" onclick="showSection('create')">ìƒˆ ê²Œì‹œê¸€</button>
                <button class="nav-btn" onclick="showSection('search')">ê²€ìƒ‰ ë° í†µê³„</button>
            </div>
        </div>

        <!-- ê²Œì‹œê¸€ ëª©ë¡ ì„¹ì…˜ -->
        <div id="listSection" class="section">
            <h2>ğŸ“‹ ê²Œì‹œê¸€ ëª©ë¡</h2>
            <div class="search-section">
                <div class="search-form">
                    <div class="form-group" style="min-width: 120px;">
                        <label for="listEventType">ì´ë²¤íŠ¸ íƒ€ì…</label>
                        <select id="listEventType">
                            <option value="">ì „ì²´</option>
                            <option value="MUSICAL">ë®¤ì§€ì»¬</option>
                            <option value="MOVIE">ì˜í™”</option>
                            <option value="THEATER">ì—°ê·¹</option>
                            <option value="EXHIBITION">ì „ì‹œ</option>
                            <option value="CLASSICAL">í´ë˜ì‹</option>
                            <option value="DANCE">ë¬´ìš©</option>
                            <option value="CONCERT">ì½˜ì„œíŠ¸</option>
                            <option value="FESTIVAL">í˜ìŠ¤í‹°ë²Œ</option>
                            <option value="LOCAL_EVENT">ì§€ì—­ í–‰ì‚¬</option>
                            <option value="OTHER">ê¸°íƒ€</option>
                        </select>
                    </div>
                    <div class="form-group" style="min-width: 150px;">
                        <label for="listAuthor">ì‘ì„±ì</label>
                        <input type="text" id="listAuthor" placeholder="ì‘ì„±ì ê²€ìƒ‰">
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button type="button" class="btn" onclick="loadBoardList()">ğŸ” ì¡°íšŒ</button>
                    </div>
                </div>
            </div>
            <div id="boardList" class="board-list">
                <!-- ê²Œì‹œê¸€ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
            <div id="listResult" class="result"></div>
        </div>

        <!-- ìƒˆ ê²Œì‹œê¸€ ì‘ì„± ì„¹ì…˜ -->
        <div id="createSection" class="section hidden">
            <h2>âœï¸ ìƒˆ ê²Œì‹œê¸€ ì‘ì„±</h2>
            <form id="createForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="title">ì œëª© *</label>
                        <input type="text" id="title" required>
                    </div>
                    <div class="form-group">
                        <label for="authorId">ì‘ì„±ì ID *</label>
                        <input type="number" id="authorId" required min="1">
                    </div>
                </div>

                <div class="form-group">
                    <label for="content">ë‚´ìš© *</label>
                    <textarea id="content" required placeholder="ê²Œì‹œê¸€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="eventType">ê´€ë ¨ ì´ë²¤íŠ¸ íƒ€ì…</label>
                        <select id="eventType">
                            <option value="">ì„ íƒ ì•ˆí•¨</option>
                            <option value="MUSICAL">ë®¤ì§€ì»¬</option>
                            <option value="MOVIE">ì˜í™”</option>
                            <option value="THEATER">ì—°ê·¹</option>
                            <option value="EXHIBITION">ì „ì‹œ</option>
                            <option value="CLASSICAL">í´ë˜ì‹</option>
                            <option value="DANCE">ë¬´ìš©</option>
                            <option value="CONCERT">ì½˜ì„œíŠ¸</option>
                            <option value="FESTIVAL">í˜ìŠ¤í‹°ë²Œ</option>
                            <option value="LOCAL_EVENT">ì§€ì—­ í–‰ì‚¬</option>
                            <option value="OTHER">ê¸°íƒ€</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="eventId">ì´ë²¤íŠ¸ ID</label>
                        <input type="number" id="eventId" min="1" placeholder="ì—°ê²°í•  ì´ë²¤íŠ¸ ID (ì„ íƒì‚¬í•­)">
                    </div>
                </div>

                <div style="text-align: right;">
                    <button type="submit" class="btn">ğŸ“ ê²Œì‹œê¸€ ì‘ì„±</button>
                </div>
            </form>
            <div id="createResult" class="result"></div>
        </div>

        <!-- ê²€ìƒ‰ ë° í†µê³„ ì„¹ì…˜ -->
        <div id="searchSection" class="section hidden">
            <h2>ğŸ” ê²€ìƒ‰ ë° í†µê³„</h2>
            
            <div class="stats" id="statsContainer">
                <!-- í†µê³„ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>

            <div class="search-section">
                <h3>ê³ ê¸‰ ê²€ìƒ‰</h3>
                <form id="searchForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="searchKeyword">í‚¤ì›Œë“œ</label>
                            <input type="text" id="searchKeyword" placeholder="ì œëª© ë˜ëŠ” ë‚´ìš© ê²€ìƒ‰">
                        </div>
                        <div class="form-group">
                            <label for="searchEventType">ì´ë²¤íŠ¸ íƒ€ì…</label>
                            <select id="searchEventType">
                                <option value="">ì „ì²´</option>
                                <option value="MUSICAL">ë®¤ì§€ì»¬</option>
                                <option value="MOVIE">ì˜í™”</option>
                                <option value="THEATER">ì—°ê·¹</option>
                                <option value="EXHIBITION">ì „ì‹œ</option>
                                <option value="CLASSICAL">í´ë˜ì‹</option>
                                <option value="DANCE">ë¬´ìš©</option>
                                <option value="CONCERT">ì½˜ì„œíŠ¸</option>
                                <option value="FESTIVAL">í˜ìŠ¤í‹°ë²Œ</option>
                                <option value="LOCAL_EVENT">ì§€ì—­ í–‰ì‚¬</option>
                                <option value="OTHER">ê¸°íƒ€</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="searchAuthor">ì‘ì„±ì</label>
                            <input type="text" id="searchAuthor" placeholder="ì‘ì„±ìëª… ê²€ìƒ‰">
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <button type="submit" class="btn">ğŸ” ê²€ìƒ‰í•˜ê¸°</button>
                    </div>
                </form>
            </div>

            <div id="searchResults" class="board-list">
                <!-- ê²€ìƒ‰ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            <div id="searchResult" class="result"></div>
        </div>
    </div>

    <!-- í¸ì§‘ ëª¨ë‹¬ -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ê²Œì‹œê¸€ ìˆ˜ì •</h3>
                <span class="close" onclick="closeEditModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <input type="hidden" id="editBoardId">
                    
                    <div class="form-group">
                        <label for="editTitle">ì œëª© *</label>
                        <input type="text" id="editTitle" required>
                    </div>

                    <div class="form-group">
                        <label for="editContent">ë‚´ìš© *</label>
                        <textarea id="editContent" required></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="editEventType">ì´ë²¤íŠ¸ íƒ€ì…</label>
                            <select id="editEventType">
                                <option value="">ì„ íƒ ì•ˆí•¨</option>
                                <option value="MUSICAL">ë®¤ì§€ì»¬</option>
                                <option value="MOVIE">ì˜í™”</option>
                                <option value="THEATER">ì—°ê·¹</option>
                                <option value="EXHIBITION">ì „ì‹œ</option>
                                <option value="CLASSICAL">í´ë˜ì‹</option>
                                <option value="DANCE">ë¬´ìš©</option>
                                <option value="CONCERT">ì½˜ì„œíŠ¸</option>
                                <option value="FESTIVAL">í˜ìŠ¤í‹°ë²Œ</option>
                                <option value="LOCAL_EVENT">ì§€ì—­ í–‰ì‚¬</option>
                                <option value="OTHER">ê¸°íƒ€</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editEventId">ì´ë²¤íŠ¸ ID</label>
                            <input type="number" id="editEventId" min="1">
                        </div>
                    </div>

                    <div style="text-align: right; margin-top: 30px;">
                        <button type="button" class="btn secondary" onclick="closeEditModal()">ì·¨ì†Œ</button>
                        <button type="submit" class="btn">ğŸ’¾ ì €ì¥</button>
                    </div>
                </form>
                <div id="editResult" class="result"></div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentBoards = [];
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            loadBoardList();
            loadStats();
            
            // í¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('createForm').addEventListener('submit', handleCreateSubmit);
            document.getElementById('editForm').addEventListener('submit', handleEditSubmit);
            document.getElementById('searchForm').addEventListener('submit', handleSearchSubmit);
        });

        // ì„¹ì…˜ ì „í™˜
        function showSection(sectionName) {
            const sections = ['listSection', 'createSection', 'searchSection'];
            const buttons = document.querySelectorAll('.nav-btn');
            
            sections.forEach(id => {
                document.getElementById(id).classList.toggle('hidden', id !== `${sectionName}Section`);
            });
            
            buttons.forEach((btn, index) => {
                const sectionNames = ['list', 'create', 'search'];
                btn.classList.toggle('active', sectionNames[index] === sectionName);
            });
            
            if (sectionName === 'search') {
                loadStats();
            }
        }

        // ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
        async function loadBoardList() {
            try {
                showLoading('boardList');
                const response = await fetch('/api/v1/board');
                const boards = await response.json();
                
                if (response.ok) {
                    currentBoards = boards;
                    renderBoardList(boards);
                    hideResult('listResult');
                } else {
                    showError('listResult', 'ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨');
                }
            } catch (error) {
                showError('listResult', `ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${error.message}`);
            } finally {
                hideLoading('boardList');
            }
        }

        // ê²Œì‹œê¸€ ëª©ë¡ ë Œë”ë§
        function renderBoardList(boards) {
            const container = document.getElementById('boardList');
            
            if (!boards || boards.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: #6c757d;">ğŸ“ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            container.innerHTML = boards.map(board => `
                <div class="board-item">
                    <div class="board-header">
                        <h3 class="board-title">${escapeHtml(board.title)}</h3>
                        <span class="board-id">ID: ${board.id}</span>
                    </div>
                    
                    <div class="board-meta">
                        <span>ğŸ‘¤ ${escapeHtml(board.author.nickname)}</span>
                        <span>ğŸ“… ${formatDate(board.createdAt)}</span>
                        <span>â¤ï¸ ${board.likeCount}</span>
                        ${board.eventCard ? `<span>ğŸ­ ${board.eventCard.eventType}</span>` : ''}
                    </div>
                    
                    <div class="board-content preview">${escapeHtml(board.content)}</div>
                    
                    ${board.eventCard ? `
                        <div class="event-info">
                            <h4>ğŸ“ ì—°ê²°ëœ ì´ë²¤íŠ¸</h4>
                            <p><strong>${escapeHtml(board.eventCard.title)}</strong></p>
                            <p>${escapeHtml(board.eventCard.eventLocation)} â€¢ ${formatDate(board.eventCard.startDate)}</p>
                        </div>
                    ` : ''}
                    
                    <div class="board-actions">
                        <button class="btn secondary" onclick="viewBoard(${board.id})">ğŸ‘ï¸ ìƒì„¸ë³´ê¸°</button>
                        <button class="btn" onclick="editBoard(${board.id})">âœï¸ ìˆ˜ì •</button>
                        <button class="btn danger" onclick="deleteBoard(${board.id})">ğŸ—‘ï¸ ì‚­ì œ</button>
                    </div>
                </div>
            `).join('');
        }

        // ìƒˆ ê²Œì‹œê¸€ ì‘ì„±
        async function handleCreateSubmit(e) {
            e.preventDefault();
            
            const formData = {
                title: document.getElementById('title').value,
                content: document.getElementById('content').value,
                authorId: parseInt(document.getElementById('authorId').value),
                eventType: document.getElementById('eventType').value || null,
                eventId: document.getElementById('eventId').value ? parseInt(document.getElementById('eventId').value) : null
            };
            
            try {
                showLoading('createForm');
                const response = await fetch('/api/v1/board', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showSuccess('createResult', 'ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    document.getElementById('createForm').reset();
                    loadBoardList();
                } else {
                    showError('createResult', result.message || 'ê²Œì‹œê¸€ ì‘ì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showError('createResult', `ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${error.message}`);
            } finally {
                hideLoading('createForm');
            }
        }

        // ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°
        function viewBoard(boardId) {
            const board = currentBoards.find(b => b.id === boardId);
            if (!board) return;
            
            alert(`ì œëª©: ${board.title}\n\në‚´ìš©: ${board.content}\n\nì‘ì„±ì: ${board.author.nickname}\nì‘ì„±ì¼: ${formatDate(board.createdAt)}\nì¢‹ì•„ìš”: ${board.likeCount}`);
        }

        // ê²Œì‹œê¸€ ìˆ˜ì • ëª¨ë‹¬ ì—´ê¸°
        function editBoard(boardId) {
            const board = currentBoards.find(b => b.id === boardId);
            if (!board) return;
            
            document.getElementById('editBoardId').value = board.id;
            document.getElementById('editTitle').value = board.title;
            document.getElementById('editContent').value = board.content;
            document.getElementById('editEventType').value = board.eventCard ? board.eventCard.eventType : '';
            document.getElementById('editEventId').value = board.eventCard ? board.eventCard.id : '';
            
            document.getElementById('editModal').style.display = 'block';
        }

        // í¸ì§‘ ëª¨ë‹¬ ë‹«ê¸°
        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
            hideResult('editResult');
        }

        // ê²Œì‹œê¸€ ìˆ˜ì •
        async function handleEditSubmit(e) {
            e.preventDefault();
            
            const boardId = document.getElementById('editBoardId').value;
            const formData = {
                title: document.getElementById('editTitle').value,
                content: document.getElementById('editContent').value,
                authorId: currentBoards.find(b => b.id == boardId).author.id, // ê¸°ì¡´ ì‘ì„±ì ID ìœ ì§€
                eventType: document.getElementById('editEventType').value || null,
                eventId: document.getElementById('editEventId').value ? parseInt(document.getElementById('editEventId').value) : null
            };
            
            try {
                showLoading('editForm');
                const response = await fetch(`/api/v1/board/${boardId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showSuccess('editResult', 'ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    setTimeout(() => {
                        closeEditModal();
                        loadBoardList();
                    }, 1500);
                } else {
                    showError('editResult', result.message || 'ê²Œì‹œê¸€ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showError('editResult', `ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${error.message}`);
            } finally {
                hideLoading('editForm');
            }
        }

        // ê²Œì‹œê¸€ ì‚­ì œ
        async function deleteBoard(boardId) {
            if (!confirm('ì •ë§ë¡œ ì´ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                const response = await fetch(`/api/v1/board/${boardId}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    showSuccess('listResult', 'ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
                    loadBoardList();
                } else {
                    showError('listResult', 'ê²Œì‹œê¸€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showError('listResult', `ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${error.message}`);
            }
        }

        // ê²€ìƒ‰ ì²˜ë¦¬
        async function handleSearchSubmit(e) {
            e.preventDefault();
            
            const params = new URLSearchParams();
            const keyword = document.getElementById('searchKeyword').value;
            const eventType = document.getElementById('searchEventType').value;
            const author = document.getElementById('searchAuthor').value;
            
            if (keyword) params.append('keyword', keyword);
            if (eventType) params.append('eventType', eventType);
            if (author) params.append('author', author);
            
            try {
                showLoading('searchResults');
                const response = await fetch(`/api/v1/board/search?${params}`);
                const boards = await response.json();
                
                if (response.ok) {
                    renderSearchResults(boards);
                    hideResult('searchResult');
                } else {
                    showError('searchResult', 'ê²€ìƒ‰ ì‹¤íŒ¨');
                }
            } catch (error) {
                showError('searchResult', `ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${error.message}`);
            } finally {
                hideLoading('searchResults');
            }
        }

        // ê²€ìƒ‰ ê²°ê³¼ ë Œë”ë§
        function renderSearchResults(boards) {
            const container = document.getElementById('searchResults');
            
            if (!boards || boards.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: #6c757d;">ğŸ” ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            container.innerHTML = `
                <h3>ğŸ” ê²€ìƒ‰ ê²°ê³¼ (${boards.length}ê°œ)</h3>
                ${boards.map(board => `
                    <div class="board-item">
                        <div class="board-header">
                            <h3 class="board-title">${escapeHtml(board.title)}</h3>
                            <span class="board-id">ID: ${board.id}</span>
                        </div>
                        <div class="board-meta">
                            <span>ğŸ‘¤ ${escapeHtml(board.author.nickname)}</span>
                            <span>ğŸ“… ${formatDate(board.createdAt)}</span>
                            <span>â¤ï¸ ${board.likeCount}</span>
                        </div>
                        <div class="board-content preview">${escapeHtml(board.content)}</div>
                    </div>
                `).join('')}
            `;
        }

        // í†µê³„ ì¡°íšŒ
        async function loadStats() {
            try {
                const response = await fetch('/api/v1/board');
                const boards = await response.json();
                
                if (response.ok) {
                    renderStats(boards);
                }
            } catch (error) {
                console.error('í†µê³„ ë¡œë”© ì‹¤íŒ¨:', error);
            }
        }

        // í†µê³„ ë Œë”ë§
        function renderStats(boards) {
            const container = document.getElementById('statsContainer');
            
            const totalBoards = boards.length;
            const totalLikes = boards.reduce((sum, board) => sum + board.likeCount, 0);
            const eventTypeCount = {};
            
            boards.forEach(board => {
                if (board.eventCard) {
                    const type = board.eventCard.eventType;
                    eventTypeCount[type] = (eventTypeCount[type] || 0) + 1;
                }
            });
            
            const mostPopularType = Object.entries(eventTypeCount)
                .sort(([,a], [,b]) => b - a)[0]?.[0] || 'ì—†ìŒ';
            
            container.innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${totalBoards}</div>
                    <div class="stat-label">ì´ ê²Œì‹œê¸€ ìˆ˜</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${totalLikes}</div>
                    <div class="stat-label">ì´ ì¢‹ì•„ìš” ìˆ˜</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${mostPopularType}</div>
                    <div class="stat-label">ì¸ê¸° ì´ë²¤íŠ¸ íƒ€ì…</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${Object.keys(eventTypeCount).length}</div>
                    <div class="stat-label">ì—°ê²°ëœ ì´ë²¤íŠ¸ íƒ€ì… ìˆ˜</div>
                </div>
            `;
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function showLoading(elementId) {
            document.getElementById(elementId).classList.add('loading');
        }

        function hideLoading(elementId) {
            document.getElementById(elementId).classList.remove('loading');
        }

        function showResult(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `result ${type}`;
            element.style.display = 'block';
        }

        function showSuccess(elementId, message) {
            showResult(elementId, message, 'success');
        }

        function showError(elementId, message) {
            showResult(elementId, message, 'error');
        }

        function hideResult(elementId) {
            document.getElementById(elementId).style.display = 'none';
        }

        // ëª¨ë‹¬ í´ë¦­ ì´ë²¤íŠ¸ (ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°)
        window.onclick = function(event) {
            const modal = document.getElementById('editModal');
            if (event.target === modal) {
                closeEditModal();
            }
        }
    </script>
</body>
</html>